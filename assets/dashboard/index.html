<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tanuki MCP Dashboard</title>
    <link rel="stylesheet" href="/assets/style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>
                <svg class="logo" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"/>
                </svg>
                Tanuki MCP Dashboard
            </h1>
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span id="status-text">Connected</span>
            </div>
        </div>
    </header>

    <main>
        <!-- Overview Cards -->
        <section class="overview-cards">
            <div class="card stat-card">
                <div class="stat-icon requests-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-value" id="total-requests">0</span>
                    <span class="stat-label">Total Requests</span>
                </div>
            </div>
            <div class="card stat-card">
                <div class="stat-icon errors-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="12"/>
                        <line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-value" id="total-errors">0</span>
                    <span class="stat-label">Errors</span>
                </div>
            </div>
            <div class="card stat-card">
                <div class="stat-icon rate-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
                        <polyline points="17 6 23 6 23 12"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-value" id="requests-rate">0</span>
                    <span class="stat-label">Requests/min</span>
                </div>
            </div>
            <div class="card stat-card">
                <div class="stat-icon uptime-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-value" id="uptime">0s</span>
                    <span class="stat-label">Uptime</span>
                </div>
            </div>
        </section>

        <!-- Configuration Section -->
        <section class="config-section">
            <div class="card">
                <h2>Configuration</h2>
                <div class="config-grid" id="config-grid">
                    <div class="config-item">
                        <span class="config-label">Server Name</span>
                        <span class="config-value" id="server-name">-</span>
                    </div>
                    <div class="config-item">
                        <span class="config-label">Version</span>
                        <span class="config-value" id="server-version">-</span>
                    </div>
                    <div class="config-item">
                        <span class="config-label">GitLab URL</span>
                        <span class="config-value" id="gitlab-url">-</span>
                    </div>
                    <div class="config-item">
                        <span class="config-label">Transport</span>
                        <span class="config-value" id="transport-mode">-</span>
                    </div>
                    <div class="config-item">
                        <span class="config-label">Access Level</span>
                        <span class="config-value" id="access-level">-</span>
                    </div>
                    <div class="config-item">
                        <span class="config-label">Tools Available</span>
                        <span class="config-value" id="tool-count">-</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Two Column Layout -->
        <div class="two-column">
            <!-- Projects Section -->
            <section class="card">
                <h2>Projects Accessed</h2>
                <div class="table-container">
                    <table id="projects-table">
                        <thead>
                            <tr>
                                <th>Project</th>
                                <th>Access Count</th>
                                <th>Tools Used</th>
                                <th>Last Accessed</th>
                            </tr>
                        </thead>
                        <tbody id="projects-body">
                            <tr class="empty-row">
                                <td colspan="4">No projects accessed yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Tools Section -->
            <section class="card">
                <h2>Tool Usage</h2>
                <div class="table-container">
                    <table id="tools-table">
                        <thead>
                            <tr>
                                <th>Tool</th>
                                <th>Calls</th>
                                <th>Errors</th>
                                <th>Avg Duration</th>
                            </tr>
                        </thead>
                        <tbody id="tools-body">
                            <tr class="empty-row">
                                <td colspan="4">No tools called yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- Categories Section -->
        <section class="card">
            <h2>Usage by Category</h2>
            <div class="categories-grid" id="categories-grid">
                <div class="category-placeholder">No category data yet</div>
            </div>
        </section>

        <!-- Recent Requests Section -->
        <section class="card">
            <h2>Recent Requests</h2>
            <div class="table-container">
                <table id="recent-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Tool</th>
                            <th>Project</th>
                            <th>Status</th>
                            <th>Duration</th>
                        </tr>
                    </thead>
                    <tbody id="recent-body">
                        <tr class="empty-row">
                            <td colspan="5">No recent requests</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <footer>
        <p>Tanuki MCP Server Dashboard &bull; Auto-refreshes every 2 seconds</p>
    </footer>

    <script src="/assets/app.js"></script>
</body>
</html>
